<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Optimise income from arbitrage — optimise_arbitrage • rbattery</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Optimise income from arbitrage — optimise_arbitrage" />
<meta property="og:description" content="optimise_arbitrage maximises the income from a battery storage
solution by using a linear programming based optimisation." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rbattery</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/NickPTaylor/rbattery/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Optimise income from arbitrage</h1>
    <small class="dont-index">Source: <a href='https://github.com/NickPTaylor/rbattery/blob/master/R/optimise.R'><code>R/optimise.R</code></a></small>
    <div class="hidden name"><code>optimise_arbitrage.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>optimise_arbitrage</code> maximises the income from a battery storage
solution by using a linear programming based optimisation.</p>
    </div>

    <pre class="usage"><span class='fu'>optimise_arbitrage</span>(
  <span class='no'>data</span>,
  <span class='no'>price_from</span>,
  <span class='kw'>exclude_from</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>max_charge_from</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>min_charge_from</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>capacity</span>,
  <span class='no'>c_rate</span>,
  <span class='kw'>efficiency</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>t_period</span> <span class='kw'>=</span> <span class='fl'>0.5</span>,
  <span class='kw'>init_charge</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>deg_cost_per_cycle</span> <span class='kw'>=</span> <span class='fl'>0</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>data frame, with a row for each settlement period and columns
for:</p><dl'>
    <dt>Spot Price.</dt><dd><p>Numeric, mandatory.  Electricity spot price for each
      settlement period.</p></dd>
    <dt>Excluded Settlement Periods.</dt><dd><p>Logical, optional.  Should the
      settlement period be excluded from arbitrage optimisation?</p></dd>
    <dt>Minimum Charge.</dt><dd><p>Numeric, optional.  Minimum charge at beginning
      of settlement period.</p></dd>
    <dt>Maximum Charge.</dt><dd><p>Numeric, optional.  Maximum charge at beginning
      of settlement period.</p></dd>
 
</dl></td>
    </tr>
    <tr>
      <th>price_from</th>
      <td><p>string.  Name of column in <code>data</code> which refers to
the spot price.</p></td>
    </tr>
    <tr>
      <th>exclude_from</th>
      <td><p>string. Name of column in <code>data</code> which refers to
excluded settlement periods, if applicable.</p></td>
    </tr>
    <tr>
      <th>max_charge_from</th>
      <td><p>string.  Name of column in <code>data</code> which refers
to maximum charge, if applicable.</p></td>
    </tr>
    <tr>
      <th>min_charge_from</th>
      <td><p>string.  Name of column in <code>data</code> which refers
to minimum charge, if applicable.</p></td>
    </tr>
    <tr>
      <th>capacity</th>
      <td><p>numeric scalar, battery capacity.</p></td>
    </tr>
    <tr>
      <th>c_rate</th>
      <td><p>numeric scalar, battery charge rate.</p></td>
    </tr>
    <tr>
      <th>efficiency</th>
      <td><p>numeric scalar, charge/discharge efficiency of battery.</p></td>
    </tr>
    <tr>
      <th>t_period</th>
      <td><p>numeric scalar, duration of a settlement period.</p></td>
    </tr>
    <tr>
      <th>init_charge</th>
      <td><p>numeric scalar, initial charge on battery.</p></td>
    </tr>
    <tr>
      <th>deg_cost_per_cycle</th>
      <td><p>numeric scalar, degradation cost per complete
charge/discharge cycle.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a data.frame with the same data as the <code>data</code> argument,
  as well additional data describing the battery operation for optimal
  arbitrage income.  The battery operation data is:</p><dl'>
    <dt><code>charge_state</code></dt><dd><p>numeric, the state of charge at the beginning
      of the settlement period for optimal arbitrage.</p></dd>
    <dt><code>discharge</code></dt><dd><p>numeric, the proportion of the settlement period
      that the battery should discharge for optimal arbitrage.</p></dd>
    <dt><code>charge</code></dt><dd><p>numeric, the proportion of the settlement period
      that the battery should charge for optimal arbitrage.</p></dd>
    <dt><code>opt_arb</code></dt><dd><p>numeric, income during settlement period for
      optimal arbitrage.</p></dd>
    <dt><code>deg_cost</code></dt><dd><p>numeric, cost of degradation during settlement
      period.</p></dd>
  
</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The arbitrage market involves charging the battery when the price of
electricity is low and discharging when it is high. The amount of energy that
the battery can store is limited by its capacity.  The charge rate is the
battery power normalised by capacity. For example, a battery with a:</p>
<ul>
<li><p>Charge rate of 1 will fully charge/discharge in 1 hour.</p></li>
<li><p>Charge rate of 2 will fully charge/discharge in 30 minutes.</p></li>
<li><p>Charge rate of .5 will fully charge/discharge in 2 hours.</p></li>
</ul>

<p>The efficiency of the battery will impact the profitability of
charging/discharging since a certain amount of energy is lost as heat during
the process with comes at a cost.</p>
<p>The battery degrades as it is used.  In this simple model, a degradation
cost per charge/discharge cycle is assumed i.e. <code>deg_cost_per_cycle</code>.
For each settlement period, the cost of degradation is calculated based on
the proportion of a charge/discharge cycle occurring in the period.</p>
<p>Optionally, the <code>exclude_from</code> column of <code>data</code> can be used to
control whether settlement periods should be excluded from arbitrage
optimisation.  If the value is <code>TRUE</code>, the settlement period will be
excluded from arbitrage, or <code>FALSE</code> otherwise.</p>
<p>Optionally, the <code>max_charge_from</code> and/or <code>min_charge_from</code> columns
of <code>data</code> can be supplied.  If these arguments are not provided, then
for every settlement period, the minimum charge will be zero and the maximum
charge will be the value provided by the <code>capacity</code> argument.  If
<code>max_charge_from</code> and/or <code>min_charge_from</code> are set, then values
specify the maximum and minimum charge, respectively, at the beginning of
the corresponding settlement period.  Any value that is <code>NA</code> is
default to be zero for the minimum charge and the value provided by the
<code>capacity</code> argument for the maximum charge.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>optimise_arbitrage</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>price</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>5.0</span>, <span class='fl'>5.0</span>, <span class='fl'>10.0</span>, <span class='fl'>10.0</span>)),
    <span class='kw'>price_from</span> <span class='kw'>=</span> <span class='st'>'price'</span>, <span class='kw'>capacity</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>c_rate</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt;   price charge_state discharge charge arb_income deg_cost
#&gt; 1     5          0.0         0      1       -2.5        0
#&gt; 2     5          0.5         0      1       -2.5        0
#&gt; 3    10          1.0         1      0        5.0        0
#&gt; 4    10          0.5         1      0        5.0        0</div><div class='input'><span class='fu'>optimise_arbitrage</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>price</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>5.0</span>, <span class='fl'>5.0</span>, <span class='fl'>10.0</span>, <span class='fl'>10.0</span>)),
    <span class='kw'>price_from</span> <span class='kw'>=</span> <span class='st'>'price'</span>, <span class='kw'>capacity</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>c_rate</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>efficiency</span> <span class='kw'>=</span> <span class='fl'>.7</span>)</div><div class='output co'>#&gt;   price charge_state discharge charge arb_income deg_cost
#&gt; 1     5            0         0      0          0        0
#&gt; 2     5            0         0      0          0        0
#&gt; 3    10            0         0      0          0        0
#&gt; 4    10            0         0      0          0        0</div><div class='input'><span class='fu'>optimise_arbitrage</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>price</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>5.0</span>, <span class='fl'>5.0</span>, <span class='fl'>10.0</span>, <span class='fl'>10.0</span>),
                                     <span class='kw'>exclude</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>)),
    <span class='kw'>price_from</span> <span class='kw'>=</span> <span class='st'>'price'</span>, <span class='kw'>capacity</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>c_rate</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>efficiency</span> <span class='kw'>=</span> <span class='fl'>.7</span>)</div><div class='output co'>#&gt;   price exclude charge_state discharge charge arb_income deg_cost
#&gt; 1     5       0            0         0      0          0        0
#&gt; 2     5       1            0         0      0          0        0
#&gt; 3    10       1            0         0      0          0        0
#&gt; 4    10       0            0         0      0          0        0</div><div class='input'><span class='fu'>optimise_arbitrage</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>price</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>5.0</span>, <span class='fl'>5.0</span>, <span class='fl'>10.0</span>, <span class='fl'>10.0</span>),
                                     <span class='kw'>exclude</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>),
                                     <span class='kw'>max_charge</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>, <span class='fl'>.4</span>, <span class='fl'>NA</span>, <span class='fl'>NA</span>),
                                     <span class='kw'>min_charge</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>NA</span>, <span class='fl'>.2</span>, <span class='fl'>NA</span>, <span class='fl'>NA</span>)),
    <span class='kw'>price_from</span> <span class='kw'>=</span> <span class='st'>'price'</span>, <span class='kw'>capacity</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>c_rate</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>efficiency</span> <span class='kw'>=</span> <span class='fl'>.7</span>)</div><div class='output co'>#&gt;   price exclude max_charge min_charge charge_state discharge charge arb_income
#&gt; 1     5       0         NA         NA            0         0      0          0
#&gt; 2     5       1        0.4        0.2            0         0      0          0
#&gt; 3    10       1         NA         NA            0         0      0          0
#&gt; 4    10       0         NA         NA            0         0      0          0
#&gt;   deg_cost
#&gt; 1        0
#&gt; 2        0
#&gt; 3        0
#&gt; 4        0</div><div class='input'><span class='fu'>optimise_arbitrage</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>price</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>5.0</span>, <span class='fl'>5.0</span>, <span class='fl'>10.0</span>, <span class='fl'>10.0</span>)),
    <span class='kw'>price_from</span> <span class='kw'>=</span> <span class='st'>'price'</span>, <span class='kw'>capacity</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>c_rate</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>deg_cost_per_cycle</span> <span class='kw'>=</span> <span class='fl'>2.0</span>)</div><div class='output co'>#&gt;   price charge_state discharge charge arb_income deg_cost
#&gt; 1     5          0.0         0      1       -2.5     -0.5
#&gt; 2     5          0.5         0      1       -2.5     -0.5
#&gt; 3    10          1.0         1      0        5.0     -0.5
#&gt; 4    10          0.5         1      0        5.0     -0.5</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nick Taylor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


